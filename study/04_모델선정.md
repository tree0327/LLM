# 모델 선정 기준: 어떤 건축가를 고를까?

## 1. 아키텍트의 시선: 적재적소 (Right Tool for the Right Job)

세상에는 수많은 건축가(LLM)가 있습니다.
무조건 "가장 똑똑한 건축가(GPT-4)"를 쓰는 게 정답일까요?
아키텍트는 **비용, 속도, 성능**을 따져서 최고의 가성비를 찾아야 합니다.

### 핵심 비유: 스마트폰 OS 전쟁

*   **OpenAI (GPT-4)**: **"아이폰(iOS)"**입니다. 가장 쓰기 쉽고, 생태계가 넓고, 성능이 균일하게 좋습니다. 표준입니다.
*   **Anthropic (Claude 3.5)**: **"안드로이드(Pixel)"**입니다. 코딩이나 작문 등 특정 분야에서는 아이폰을 능가하기도 합니다. 문맥(Context)을 아주 길게 기억합니다.
*   **Open Source (Llama 3, Mistral)**: **"리눅스(Linux)"**입니다. 내 마음대로 뜯어고칠 수 있고, 내 컴퓨터(Local)에 설치할 수도 있습니다. 하지만 관리가 어렵습니다.

## 2. 선정 기준표 (Selection Matrix)

| 모델 | 별명 | 장점 | 단점 | 추천 용도 |
| :--- | :--- | :--- | :--- | :--- |
| **GPT-4o** | **만능 천재** | 밸런스 최강, 함수 호출(Tool) 잘함 | 비쌈 | 메인 두뇌, 복잡한 추론 |
| **GPT-4o-mini** | **빠른 조수** | 엄청 싸고 엄청 빠름 | 깊은 생각 부족 | 챗봇, 단순 요약, 데이터 분류 |
| **Claude 3.5 Sonnet** | **코딩 장인** | 코드를 기가 막히게 짬, 자연스러운 글쓰기 | API 사용이 약간 까다로움 | 코딩 에이전트, 소설 창작 |
| **Llama 3 (Local)** | **보안 요원** | 데이터가 외부로 안 나감, 무료 | 고성능 컴퓨터 필요 | 사내 보안 문서 처리 |

## 3. 코드 설계도: 모델 라우터 (Model Router)

진정한 아키텍트는 하나의 모델만 쓰지 않습니다. 질문의 난이도에 따라 모델을 바꿔치기하는 **"라우터(Router)"**를 만듭니다.

```python
import openai
import os
from dotenv import load_dotenv

load_dotenv()
client = openai.OpenAI(api_key=os.getenv("OPENAI_API_KEY"))

def ask_router(question):
    # 1. 질문의 난이도 판단 (간단한 규칙)
    if len(question) < 20 or "요약" in question:
        model = "gpt-4o-mini" # ⚡ 가성비 모델
        print(f"Generic: {model} 선택 (싸고 빠름)")
    else:
        model = "gpt-4o"      # 🧠 고지능 모델
        print(f"Premium: {model} 선택 (똑똑함)")
        
    # 2. 선택된 모델 호출
    response = client.chat.completions.create(
        model=model,
        messages=[{"role": "user", "content": question}]
    )
    return response.choices[0].message.content

# 테스트
print(ask_router("이거 요약해줘"))  # -> mini 선택
print(ask_router("양자역학의 코펜하겐 해석에 대해 비판해줘")) # -> 4o 선택
```

## 4. 심화 질문

> **"오픈소스 모델(Llama 3)을 내 노트북에 깔아서 쓰면 API 비용이 0원인데, 왜 다들 비싼 OpenAI를 쓸까?"**
>
> *힌트: 전기세, 유지보수 인건비, 그리고 '품질 보증'의 문제를 생각해보세요.*

## 5. 현실 점검 (Reality Check) 🚨

> "그냥 제일 좋은 거(Claude 3.5 Sonnet) 하나만 쓰면 안 되나요?"

*   **Dependency (의존성)**: 만약 내일 갑자기 Anthropic 서버가 터지면요? 우리 서비스도 같이 망합니다.
*   **Fallback (비상대책)**: 아키텍트는 항상 **"메인 모델이 죽으면 서브 모델로 자동 전환"**되도록 설계해야 합니다. (이것도 나중에 배웁니다!)
