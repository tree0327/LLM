# LCEL 개념 심화: 데이터의 흐름 🌊

아키텍트님, **"실습 전에 개념부터!"** 아주 훌륭한 접근입니다.
코드를 치기 전에 **데이터가 어떻게 변신하는지** 머릿속에 그리는 게 핵심입니다.

---

## 1. LCEL이 뭔가요?
**L**ang**C**hain **E**xpression **L**anguage (랭체인 표현 언어).
복잡한 파이썬 코드를 **`|` (파이프)** 기호 하나로 연결하는 문법입니다.

> **"왼쪽의 출력이 오른쪽의 입력이 된다."**
> (Linux의 Pipe `|`와 똑같은 원리입니다.)

## 2. 데이터 변신 과정 (Transformation)

체인은 단순히 연결만 하는 게 아니라, 데이터를 계속 **가공**합니다.
**`Prompt | Model | Parser`** 이 세 단계에서 데이터가 어떻게 변하는지 볼까요?

### 1단계: 프롬프트 (Prompt) 📝
*   **역할**: "틀에 재료 붓기"
*   **입력(Input)**: `{"topic": "양자역학"}` (딕셔너리)
*   **출력(Output)**: `[SystemMessage(...), HumanMessage(...)]` (메시지 목록)
    *   *비유: 밀가루 반죽을 붕어빵 틀에 부어서 모양을 잡음.*

### 2단계: 모델 (Model) 🧠
*   **역할**: "생각해서 말하기"
*   **입력(Input)**: `[SystemMessage, HumanMessage]` (메시지 목록)
*   **출력(Output)**: `AIMessage(content="양자역학은...")` (AI 메시지 객체)
    *   *비유: 붕어빵 기계가 팥을 넣고 구워서 '붕어빵'을 완성함.*
    *   *주의: 아직 봉투에 안 담겨서 기름도 묻어있고 뜨거움.*

### 3단계: 파서 (Parser) 🧹
*   **역할**: "예쁘게 포장하기"
*   **입력(Input)**: `AIMessage(content="...")` (AI 메시지 객체)
*   **출력(Output)**: `"양자역학은..."` (깔끔한 문자열)
    *   *비유: 붕어빵을 종이 봉투에 담아서 손님에게 건네줌.*

---

## 3. 왜 이렇게 나누나요?

그냥 한 번에 `Model`한테 문자열 던지면 안 되나요?
됩니다. 하지만 이렇게 나누면 강력한 장점이 생깁니다.

1.  **갈아끼우기 쉽다**: `OpenAI` 모델을 `Google Gemini`로 바꾸고 싶다면? 가운데 블록만 쏙 빼서 교체하면 끝. (입출력 규격이 통일되어 있으니까!)
2.  **부분 테스트**: 프롬프트만 잘 만들어지는지, 모델만 잘 동작하는지 따로따로 확인 가능.
3.  **스트리밍(Streaming)**: `Parser`가 붙으면 글자가 생성되는 족족 실시간으로 화면에 뿌려줄 수 있음.

---

## 🦁 아키텍트의 요약
**LCEL**은 **"데이터 가공 공장"**입니다.
*   **원료 (`Dict`)** -> **가공 1 (`Prompt`)** -> **가공 2 (`Model`)** -> **포장 (`Parser`)** -> **제품 (`String`)**

이 흐름이 머릿속에 그려지시나요?
이제 이 흐름을 코드로 구현하는 게 아까 그 실습(`12_실습_LCEL_기초.md`)입니다. 멍! 🐶
