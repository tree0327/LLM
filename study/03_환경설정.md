# 작업 환경 설정: API Key와 .env

## 1. 아키텍트의 시선: 보안(Security)

건설 현장(Python)에 천재 건축가(LLM)를 부르려면 **"출입증"**이 필요합니다.
이 출입증이 바로 **API Key**입니다.

### 핵심 비유: 법인 카드와 금고

*   **API Key**: **"내 돈 내고 쓰는 법인 카드"**입니다. 남에게 보여주면 내 돈이 빠져나갑니다. 절대 코드에 그대로 적으면 안 됩니다. (GitHub에 올리는 순간 해킹당합니다.)
*   **`.env` 파일**: **"금고"**입니다. 카드를 코드 바깥의 안전한 곳에 숨겨두는 파일입니다.
*   **`python-dotenv`**: **"금고 따는 기술"**입니다. Python 코드가 실행될 때만 금고를 열어서 카드를 꺼내오게 합니다.

## 2. 필수 준비물 (Architecture Components)

### 2.1 API Key 발급받기 (카드 발급) 💳
가장 먼저 건축가(OpenAI)에게 "계약금"을 걸고 카드를 받아야 합니다.

1.  **OpenAI 접속**: [platform.openai.com](https://platform.openai.com/) 에 로그인합니다.
2.  **Dashboard 이동**: 우측 상단 프로필 클릭 -> `Your profile` -> `User API keys` 메뉴로 이동합니다.
3.  **키 생성**: `+ Create new secret key` 버튼을 클릭합니다.
4.  **복사**: `sk-...`로 시작하는 긴 문자열이 나옵니다. **이 창을 닫으면 다시는 볼 수 없으니 지금 바로 복사하세요!**

### 2.2 기타 준비물
1.  **Visual Studio Code**: 작업실.
2.  **Python 라이브러리**:
    *   `openai`: 건축가와 소통하는 무전기.
    *   `python-dotenv`: 금고 관리인.

## 3. 실전 구축 (Step-by-Step)

### 단계 1: 금고 만들기 (.env)
프로젝트 폴더 최상단에 `.env`라는 이름의 파일을 만들고, 키를 숨깁니다.

```bash
# 파일명: .env
OPENAI_API_KEY=sk-proj-1234567890abcdefg...
```

### 단계 2: 금고 관리인 고용 (라이브러리 설치)
터미널(Terminal)에 다음 주문을 외웁니다.

```bash
pip install openai python-dotenv
```

### 단계 3: 금고에서 키 꺼내기 (Python Code)
이제 Python 코드(현장 소장)에게 "금고에서 키를 꺼내서 써"라고 가르칩니다.

```python
# 파일명: 01_setup.py
import os
from dotenv import load_dotenv
import openai

# 1. 금고(.env) 열기
# 이 코드가 없으면 키를 못 찾아서 에러가 납니다.
load_dotenv()

# 2. 키 꺼내기
api_key = os.getenv("OPENAI_API_KEY")

# 3. 건축가 사무소에 연결
client = openai.OpenAI(api_key=api_key)

# 4. 테스트 요청
print("✅ 환경 설정 완료! 건축가와 연결되었습니다.")
```

## 4. 심화 질문

> **"API Key를 실수로 GitHub에 올렸다면 어떻게 해야 할까?"**
>
> 1.  즉시 해당 키를 폐기(Revoke)하고 재발급받아야 합니다.
> 2.  이런 실수를 막기 위해 `.gitignore`라는 파일에 `.env`를 등록해야 합니다. **"이 파일은 절대 공개하지 마!"**라고 Git에게 알려주는 것입니다.

## 5. 현실 점검 (Reality Check) 🚨

> "그냥 코드에 `api_key = 'sk-...'` 이렇게 적으면 안 되나요? 당장 편하잖아요."

*   **아마추어**: 편하니까 그냥 적습니다. -> 해커들이 긁어다가 비트코인 채굴에 씁니다. (몇백만 원 청구됨)
*   **아키텍트**: 불편해도 `.env`로 분리합니다. -> **"보안(Security)"**은 타협 대상이 아니기 때문입니다.
